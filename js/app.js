(()=>{var L={spacing:16,baseRadius:4,rippleWidth:24,rippleSpeed:14,dragCooldown:50,maxRipples:25,fadeFactor:.9,frameRate:12,halftoneAnimationSteps:10,halftoneRadiusMultiplier:1.5,rippleScaleMultiplier:2,autoRippleProbability:.1,dotInvertedColor:"#4e493e",dotDefaultColor:"#f2dfa7",resizeDebounceTime:100},A=window.devicePixelRatio||1;function j(e,t,i,s){let l=Math.floor(t),n=(Math.floor(i)*s+l)*4;if(n<0||n+3>=e.data.length)return 0;let[o,d,a]=e.data.slice(n,n+3);return(.299*o+.587*d+.114*a)/255}function J(e,t,i,s){let l=[];if(e<=0||t<=0)return l;let r=e-2*s,n=t-2*s,o=Math.floor(Math.max(0,r/i)),d=Math.floor(Math.max(0,n/i)),a=o*i,H=d*i,v=(e-a)/2,x=(t-H)/2;for(let h=0;h<=d;h++)for(let p=0;p<=o;p++)l.push({x:v+p*i,y:x+h*i});return l}function k(e,t,i){let s=e.canvas.closest(".inverted");e.fillStyle=s?L.dotInvertedColor:L.dotDefaultColor;for(let l=0;l<t.length;l++){let{x:r,y:n}=t[l],o=i(t[l]);o<=0||(e.beginPath(),e.arc(Math.round(r),Math.round(n),o,0,Math.PI*2),e.fill())}}function B(e,t,i=L.baseRadius){let s=e.parentElement,l=e.getContext("2d"),r=s.clientWidth,n=s.clientHeight,o=s.querySelector("img");return o&&o.naturalWidth&&o.naturalHeight&&r===0&&n===0?(r=o.naturalWidth,n=o.naturalHeight,e.style.width=`${r}px`,e.style.height=`${n}px`):o&&o.naturalWidth&&o.naturalHeight&&(r>0&&n===0?(n=r*(o.naturalHeight/o.naturalWidth),e.style.height=`${n}px`):n>0&&r===0&&(r=n*(o.naturalWidth/o.naturalHeight),e.style.width=`${r}px`)),r=parseFloat(getComputedStyle(e).width),n=parseFloat(getComputedStyle(e).height),e.width=r*A,e.height=n*A,l.scale(A,A),J(r,n,t,i)}function K(e){let{spacing:t,baseRadius:i,halftoneAnimationSteps:s,halftoneRadiusMultiplier:l}=L,r=1e3/L.frameRate,n=e.getContext("2d"),d=e.parentElement.querySelector("img");if(!d)return;let a=document.createElement("canvas"),H=a.getContext("2d",{willReadFrequently:!0}),v=[],x=null,h=0,p=!1,b=!1,R=0,S=null,c=()=>{n.clearRect(0,0,e.width,e.height),k(n,v,({x:f,y:W})=>{let I=f*A,z=W*A,D=e.width,M=(1-j(x,I,z,D))*h;return Math.round(i*M*l)})},q=()=>{H.drawImage(d,0,0,a.width,a.height),x=H.getImageData(0,0,a.width,a.height)},m=()=>{n.setTransform(1,0,0,1,0,0),v=B(e,t),a.width=e.width,a.height=e.height,d.complete&&d.naturalWidth&&(x===null||a.width!==x.width||a.height!==x.height)&&q()},C=f=>{if(p){if(f-R>=r&&(R=f,h=Math.min(h+1/s,1),c(),h>=1)){p=!1,b=!0;return}requestAnimationFrame(C)}},g=()=>{p||b||(p=!0,h=0,requestAnimationFrame(C))};d.onload=()=>{m(),c()},d.complete&&d.naturalWidth&&(m(),c()),window.addEventListener("resize",()=>{clearTimeout(S),S=setTimeout(()=>{m(),c()},L.resizeDebounceTime)}),new IntersectionObserver(([f])=>{f.isIntersecting&&!b&&setTimeout(g,350)},{threshold:.1}).observe(e),!p&&!b&&(m(),c())}function X(){document.querySelectorAll("canvas.ripple-canvas.halftone").forEach(K)}function Q(e){let{spacing:t,baseRadius:i,rippleWidth:s,rippleSpeed:l,dragCooldown:r,maxRipples:n,fadeFactor:o,frameRate:d,rippleScaleMultiplier:a,autoRippleProbability:H,resizeDebounceTime:v}=L,x=1e3/d,h=e.getContext("2d"),p=e.classList.contains("touch"),b=e.classList.contains("automatic"),R=e.classList.contains("loop"),S=B(e,t),c=[],q=0,m=!1,C=0,g=!1,f=!0,W=null,I=()=>{m=!1,window.removeEventListener("pointerup",I),window.removeEventListener("pointerleave",I)},z=()=>{m&&I()},D=()=>{h.clearRect(0,0,e.width,e.height),k(h,S,({x:u,y:w})=>{let y=1;for(let E of c){if(E.alpha<.01)continue;let P=u-E.x,O=w-E.y,G=E.radius-s,F=E.radius+s,$=P*P+O*O;if(Math.abs(P)>F||Math.abs(O)>F||$<G*G||$>F*F)continue;let N=Math.sqrt($),U=Math.abs(N-E.radius);y+=(1-U/s)*E.alpha*a}return Math.round(i*y)})},T=u=>{if(!g)return;u-q>=x&&(q=u,D(),c=c.map(y=>({...y,radius:y.radius+l,alpha:y.alpha*o})).filter(y=>y.alpha>.01),b&&Math.random()<H&&M(Math.random()*e.clientWidth,Math.random()*e.clientHeight),R&&c.length===0&&M(e.clientWidth/2,e.clientHeight/2)),f&&(c.length>0||b||R||p&&m)?requestAnimationFrame(T):g=!1},M=(u,w)=>{f&&(c.length>=n&&c.shift(),c.push({x:u,y:w,radius:0,alpha:1}),g||(g=!0,requestAnimationFrame(T)))};p&&(e.addEventListener("pointerdown",u=>{m=!0;let w=e.getBoundingClientRect();M(u.clientX-w.left,u.clientY-w.top),C=Date.now(),window.addEventListener("pointerup",I),window.addEventListener("pointerleave",z)}),e.addEventListener("pointermove",u=>{if(!m||Date.now()-C<r)return;let w=e.getBoundingClientRect();M(u.clientX-w.left,u.clientY-w.top),C=Date.now()})),window.addEventListener("resize",()=>{clearTimeout(W),W=setTimeout(()=>{h.setTransform(1,0,0,1,0,0),S=B(e,t),D()},v)}),new IntersectionObserver(([u])=>{f=u.isIntersecting,f&&!g&&(g=!0,requestAnimationFrame(T))},{threshold:.1}).observe(e),g||(g=!0,requestAnimationFrame(T))}function Y(){document.querySelectorAll("canvas.ripple-canvas:not(.halftone)").forEach(Q)}var Z=new Swup({plugins:[new SwupHeadPlugin]});function ee(){let e=document.getElementById("context-block"),t=document.getElementById("toggle-context");e&&t&&t.addEventListener("click",()=>{e.style.maxHeight&&e.style.maxHeight!=="0px"?(e.style.maxHeight=`${e.scrollHeight}px`,requestAnimationFrame(()=>{e.style.maxHeight="0px",e.addEventListener("transitionend",function s(){e.style.maxHeight="",e.removeEventListener("transitionend",s)},{once:!0})}),t.classList.remove("active")):(e.style.maxHeight=`${e.scrollHeight}px`,t.classList.add("active"))})}function te(){document.querySelectorAll(".accordion").forEach(e=>{let t=e.querySelector(".accordion-trigger"),i=e.querySelector(".accordion-content");!t||!i||(i.style.maxHeight=e.classList.contains("is-open")?`${i.scrollHeight}px`:"0",t.onclick=()=>{let s=e.classList.toggle("is-open");i.style.maxHeight=s?`${i.scrollHeight}px`:"0"})})}function ie(){let e=document.querySelector("header.main-menu");if(!e)return;let t=()=>{e.classList.toggle("top-expanded",window.scrollY===0)};window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("load",t),t()}function _(e,t,i){let s=document.querySelectorAll(e);if(!s.length)return;let l=new IntersectionObserver((r,n)=>{r.forEach(o=>{o.isIntersecting&&(t(o.target),n.unobserve(o.target))})},i);s.forEach(r=>l.observe(r))}function ne(){_(".test_timeline > div",i=>{i.classList.add("in-view")},{rootMargin:"0px 0px -15% 0px"});let e=document.querySelector(".whatwedo-two > h2"),t=document.querySelector(".whatwedo-two > ul");e&&t&&_(".whatwedo-two > h2",i=>{i.classList.add("in-view"),setTimeout(()=>{t.classList.add("in-view")},350)},{rootMargin:"0px 0px -50% 0px"})}function V(){Y(),setTimeout(X,50),ee(),ne(),te(),ie()}document.addEventListener("DOMContentLoaded",V);Z.hooks.on("page:view",V);})();
