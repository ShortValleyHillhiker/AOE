(()=>{var b={spacing:16,baseRadius:4,rippleWidth:24,rippleSpeed:14,dragCooldown:50,maxRipples:25,fadeFactor:.9,frameRate:12};function v(t,e,n=b.baseRadius){let i=[],r=t.width-2*n,s=t.height-2*n,o=Math.floor(r/e),u=Math.floor(s/e),l=o*e,c=u*e,h=(t.width-l)/2,w=(t.height-c)/2;for(let m=0;m<=u;m++)for(let g=0;g<=o;g++)i.push({x:h+g*e,y:w+m*e});return i}function I(t,e,n){let i="#F2DFA7",r=t.canvas,s=document.querySelector("main");r.classList.contains("theme-aware")&&s?.classList.contains("inverted")&&(i="#F2DFA7"),r.classList.contains("theme-dark")&&(i="#F2DFA7"),t.fillStyle=i;for(let o=0;o<e.length;o++){let{x:u,y:l}=e[o],c=n(e[o]);c<=0||(t.beginPath(),t.arc(Math.round(u),Math.round(l),c,0,Math.PI*2),t.fill())}}function y(t,e,n=b.baseRadius){let i=t.parentElement;return t.width=i.clientWidth,t.height=i.clientHeight,v(t,e,n)}function q(t,e,n,i){let r=Math.floor(e),o=(Math.floor(n)*i+r)*4,[u,l,c]=t.data.slice(o,o+3);return(.299*u+.587*l+.114*c)/255}var{spacing:T,baseRadius:W}=b,z=1e3/12,B=10;function k(t){let e=t.getContext("2d"),i=t.parentElement.querySelector("img");if(!i)return;let r=document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0}),o=[],u=null,l=0,c=!1,h=!1,w=0,m=()=>{e.clearRect(0,0,t.width,t.height),I(e,o,({x:d,y:p})=>{let A=1+(1-q(u,d,p,t.width)-1)*l;return Math.round(W*A*2)})},g=()=>{s.drawImage(i,0,0,t.width,t.height),u=s.getImageData(0,0,t.width,t.height)},x=()=>{o=y(t,T),r.width=t.width,r.height=t.height,i.complete&&i.naturalWidth&&g()},a=d=>{if(d-w>=z&&(w=d,l=Math.min(l+1/B,1),m(),l>=1)){c=!1,h=!0;return}c&&requestAnimationFrame(a)},f=()=>{c||h||(c=!0,l=0,requestAnimationFrame(a))};i.onload=()=>{x(),m()},i.complete&&i.naturalWidth&&(x(),m()),window.addEventListener("resize",()=>{x(),m()}),new IntersectionObserver(([d])=>{d.isIntersecting&&!h&&setTimeout(f,350)},{threshold:.1}).observe(t)}function H(){document.querySelectorAll("canvas.ripple-canvas.halftone").forEach(k)}var{spacing:R,baseRadius:N,rippleWidth:C,rippleSpeed:P,dragCooldown:X,maxRipples:Y,fadeFactor:_,frameRate:V}=b,j=1e3/V;function J(t){let e=t.getContext("2d"),n=t.classList.contains("touch"),i=t.classList.contains("automatic"),r=t.classList.contains("loop"),s=y(t,R),o=[],u=0,l=!1,c=0,h=!1,w=!0,m=()=>{e.clearRect(0,0,t.width,t.height),I(e,s,({x:a,y:f})=>{let d=1;for(let p of o){if(p.alpha<.01)continue;let F=a-p.x,A=f-p.y;if(Math.abs(F)>p.radius+C||Math.abs(A)>p.radius+C)continue;let L=F*F+A*A,E=p.radius-C,M=p.radius+C;if(L<E*E||L>M*M)continue;let G=Math.sqrt(L),O=Math.abs(G-p.radius);d+=(1-O/C)*p.alpha*2}return Math.round(N*d)})},g=a=>{a-u>=j&&(u=a,m(),o=o.map(d=>({...d,radius:d.radius+P,alpha:d.alpha*_})).filter(d=>d.alpha>.01),i&&Math.random()<.1&&x(Math.random()*t.width,Math.random()*t.height),r&&o.length===0&&x(t.width/2,t.height/2)),w&&(o.length||i||r||n&&l)?requestAnimationFrame(g):h=!1},x=(a,f)=>{w&&(o.length>=Y&&o.shift(),o.push({x:a,y:f,radius:0,alpha:1}),h||(h=!0,requestAnimationFrame(g)))};n&&(t.addEventListener("pointerdown",a=>{l=!0;let f=t.getBoundingClientRect();x(a.clientX-f.left,a.clientY-f.top),c=Date.now()}),t.addEventListener("pointerup",()=>l=!1),t.addEventListener("pointermove",a=>{if(!l||Date.now()-c<X)return;let f=t.getBoundingClientRect();x(a.clientX-f.left,a.clientY-f.top),c=Date.now()})),window.addEventListener("resize",()=>{clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(()=>{s=y(t,R),m()},250)}),new IntersectionObserver(([a])=>{w=a.isIntersecting,w&&!h&&(h=!0,requestAnimationFrame(g))},{threshold:.1}).observe(t),m(),h||(h=!0,requestAnimationFrame(g))}function D(){document.querySelectorAll("canvas.ripple-canvas:not(.halftone)").forEach(J)}var K=new Swup({plugins:[new SwupHeadPlugin]});function Q(){let t=document.getElementById("context-block"),e=document.getElementById("toggle-context");t&&e&&e.addEventListener("click",()=>{t.style.maxHeight?(t.style.maxHeight=t.scrollHeight+"px",requestAnimationFrame(()=>{t.style.maxHeight="0px",setTimeout(()=>{t.style.maxHeight=""},300)}),e.classList.remove("active")):(t.style.maxHeight=t.scrollHeight+"px",e.classList.add("active"))})}function U(){document.querySelectorAll(".accordion").forEach(t=>{let e=t.querySelector(".accordion-trigger"),n=t.querySelector(".accordion-content");!e||!n||(n.style.maxHeight=t.classList.contains("is-open")?n.scrollHeight+"px":"0",e.onclick=()=>{let i=t.classList.toggle("is-open");n.style.maxHeight=i?n.scrollHeight+"px":"0"})})}function Z(){let t=document.querySelectorAll(".test_timeline > div"),e=document.querySelector(".whatwedo-two");if(t.length){let n=new IntersectionObserver((i,r)=>{i.forEach(s=>{s.isIntersecting&&(s.target.classList.add("in-view"),r.unobserve(s.target))})},{root:null,threshold:0,rootMargin:"0px 0px -30% 0px"});t.forEach(i=>n.observe(i))}e&&new IntersectionObserver((i,r)=>{i.forEach(s=>{s.isIntersecting&&(e.classList.add("in-view"),r.unobserve(s.target))})},{root:null,threshold:0,rootMargin:"0px 0px -65% 0px"}).observe(e)}function S(){document.querySelector("canvas.halftone")&&H(),D(),Q(),Z(),U()}document.addEventListener("DOMContentLoaded",S);K.hooks.on("page:view",S);})();
