(()=>{function O(t,e){let d=Math.ceil(t.width/e),r=Math.ceil(t.height/e),o=[];for(let l=0;l<=r;l++){let i=l&1?e/2:0;for(let a=0;a<=d;a++)o.push({x:a*e+i,y:l*e})}return o}function b(t,e,d,r="#1c1c1c"){t.fillStyle=r;for(let o=0;o<e.length;o++){let{x:l,y:i}=e[o],a=d(e[o]);a<=0||(t.beginPath(),t.arc(Math.round(l),Math.round(i),a,0,Math.PI*2),t.fill())}}function M(t,e){let d=t.parentElement;return t.width=d.clientWidth,t.height=d.clientHeight,O(t,e)}var F={spacing:8,baseRadius:2.5,rippleWidth:12,rippleSpeed:10,dragCooldown:50,maxRipples:15,fadeFactor:.9,frameRate:12};function D(t,e,d,r){let o=Math.floor(e),i=(Math.floor(d)*r+o)*4,[a,u,f]=t.data.slice(i,i+3);return(.299*a+.587*u+.114*f)/255}var{spacing:T,baseRadius:W}=F,B=1e3/12,H=10;function N(t){let e=t.getContext("2d"),r=t.parentElement.querySelector("img");if(!r)return;let o=document.createElement("canvas"),l=o.getContext("2d",{willReadFrequently:!0}),i=[],a=null,u=0,f=!1,c=!1,w=0,m=()=>{e.clearRect(0,0,t.width,t.height),b(e,i,({x:s,y:p})=>{let C=1+(1-D(a,s,p,t.width)-1)*u;return Math.round(W*C*2)})},x=()=>{l.drawImage(r,0,0,t.width,t.height),a=l.getImageData(0,0,t.width,t.height)},g=()=>{i=M(t,T),o.width=t.width,o.height=t.height,r.complete&&r.naturalWidth&&x()},n=s=>{if(s-w>=B&&(w=s,u=Math.min(u+1/H,1),m(),u>=1)){f=!1,c=!0;return}f&&requestAnimationFrame(n)},h=()=>{f||c||(f=!0,u=0,requestAnimationFrame(n))};r.onload=()=>{g(),m()},r.complete&&r.naturalWidth&&(g(),m()),window.addEventListener("resize",()=>{g(),m()}),new IntersectionObserver(([s])=>{s.isIntersecting&&!c&&setTimeout(h,350)},{threshold:.1}).observe(t)}function y(){document.querySelectorAll("canvas.ripple-canvas.halftone").forEach(N)}var{spacing:G,baseRadius:X,rippleWidth:A,rippleSpeed:P,dragCooldown:Y,maxRipples:_,fadeFactor:k,frameRate:V}=F,j=1e3/V;function J(t){let e=t.getContext("2d"),d=t.classList.contains("touch"),r=t.classList.contains("automatic"),o=t.classList.contains("loop"),l=M(t,G),i=[],a=0,u=!1,f=0,c=!1,w=!0,m=()=>{e.clearRect(0,0,t.width,t.height),b(e,l,({x:n,y:h})=>{let s=1;for(let p of i){if(p.alpha<.01)continue;let R=n-p.x,C=h-p.y;if(Math.abs(R)>p.radius+A||Math.abs(C)>p.radius+A)continue;let I=R*R+C*C,E=p.radius-A,L=p.radius+A;if(I<E*E||I>L*L)continue;let S=Math.sqrt(I),z=Math.abs(S-p.radius);s+=(1-z/A)*p.alpha*2}return Math.round(X*s)})},x=n=>{n-a>=j&&(a=n,m(),i=i.map(s=>({...s,radius:s.radius+P,alpha:s.alpha*k})).filter(s=>s.alpha>.01),r&&Math.random()<.1&&g(Math.random()*t.width,Math.random()*t.height),o&&i.length===0&&g(t.width/2,t.height/2)),w&&(i.length||r||o||d&&u)?requestAnimationFrame(x):c=!1},g=(n,h)=>{w&&(i.length>=_&&i.shift(),i.push({x:n,y:h,radius:0,alpha:1}),c||(c=!0,requestAnimationFrame(x)))};d&&(t.addEventListener("pointerdown",n=>{u=!0;let h=t.getBoundingClientRect();g(n.clientX-h.left,n.clientY-h.top),f=Date.now()}),t.addEventListener("pointerup",()=>u=!1),t.addEventListener("pointermove",n=>{if(!u||Date.now()-f<Y)return;let h=t.getBoundingClientRect();g(n.clientX-h.left,n.clientY-h.top),f=Date.now()})),window.addEventListener("resize",()=>{clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(()=>{l=M(t,G),m()},250)}),new IntersectionObserver(([n])=>{w=n.isIntersecting,w&&!c&&(c=!0,requestAnimationFrame(x))},{threshold:.1}).observe(t),m(),c||(c=!0,requestAnimationFrame(x))}function q(){document.querySelectorAll("canvas.ripple-canvas:not(.halftone)").forEach(J)}var st=new Swup;document.addEventListener("DOMContentLoaded",()=>{y(),q(),new Swup({containers:["#swup"]}).hooks.on("page:view",()=>{console.log("swup in"),y(),q()})});})();
